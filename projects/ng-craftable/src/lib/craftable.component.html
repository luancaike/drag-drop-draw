<ng-template #resizeTemplate let-item let-isSelection='isSelection'>
    <div class="drag-wrapper"
         (mousedown)="dragHandler($event, item, isSelection)"></div>
    <div class="resize-wrapper">
        <div class="resize-handler left" (mousedown)="resizeHandler($event,'left', item, isSelection)"></div>
        <div class="resize-handler top" (mousedown)="resizeHandler($event, 'top',item, isSelection)"></div>
        <div class="resize-handler right" (mousedown)="resizeHandler($event,'right', item, isSelection)"></div>
        <div class="resize-handler bottom" (mousedown)="resizeHandler($event, 'bottom', item, isSelection)"></div>

        <div class="resize-handler left-top"
             (mousedown)="resizeHandler($event,'left top', item, isSelection)"></div>
        <div class="resize-handler right-top"
             (mousedown)="resizeHandler($event,'right top', item, isSelection)"></div>
        <div class="resize-handler left-bottom"
             (mousedown)="resizeHandler($event,'left bottom', item, isSelection)"></div>
        <div class="resize-handler right-bottom"
             (mousedown)="resizeHandler($event,'right bottom', item, isSelection)"></div>
    </div>
</ng-template>

<div class="main-area"
     [class.draw-mode]="enableDraw"
     [class.visualization]="visualizationMode"
     #mainArea (mousedown)="mouseDownInMainArea($event)">
    <div class="align-wrapper">
        <div class="scale-wrapper">
            <div class="guide-container" #guideContainer>
            </div>
            <div class="canvas-container"
                 #canvasContainer>
                <div class="draw-preview">
                </div>
                <div class="selection-preview">
                    <ng-template *ngTemplateOutlet="resizeTemplate; context: {$implicit: {}, isSelection: true}"></ng-template>
                </div>
                <div
                    #lego
                    *ngFor="let item of allLegoConfig;let i = index;trackBy: trackById"
                    [attr.data-key]="item.key"
                    (mousedown)="selectLego(item)"
                    style="display:none"
                    class="lego-item"
                >
                    <ng-template *ngTemplateOutlet="resizeTemplate; context: {$implicit: item}"></ng-template>
                    <div class="lego-container">
                        <ng-container *ngIf="template">
                            <ng-template *ngTemplateOutlet="template; context: {$implicit: item}"></ng-template>
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
